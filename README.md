# SproutPP

A small C++ framework/library for application context, bean factory, and property resolution ("sproutpp"). The project builds two main libraries:

- sproutpp_interface: header-only interface types (ApplicationContext, BeanFactory, PropertyResolver/Source, etc.)
- sproutpp_framework: a static library with the default implementation (bean factory, compositing property resolver, default application context, property sources)

Unit tests are provided via Catch2.

> Note: This project is derived from a modern CMake template. Some template artifacts (e.g., CTest dashboards and an example CLI named "intro") may be present but not fully wired. Where details are unknown, TODOs are left for maintainers to complete.

## Stack

- Language: C++23
- Build system: CMake (minimum 3.21)
- Package/dependency manager: CPM.cmake (via cmake/CPM.cmake)
- Third-party libraries (fetched if not provided by a parent project):
  - fmt (fmtlib/fmt)
  - spdlog
  - Catch2 (for tests)
  - CLI11
  - Boost (headers via CMake packaging in cmake/BoostConfig.cmake)

## Targets and entry points

Libraries
- sproutpp_interface (INTERFACE library)
- sproutpp_framework (STATIC library), alias: sproutpp::framework
- Aliases: sproutpp::interface, sproutpp::sproutpp_options, sproutpp::sproutpp_warnings

Tests
- SproutPP_UnitTests (executable)
  - Catch2-based unit tests discovered via CTest

CI/Dashboard helper targets (from CTest/CDash template)
- Continuous*, Experimental*, Nightly* groups (Build/Configure/Coverage/MemCheck/Start/Submit/Test/Update)

## Requirements

- CMake >= 3.21
- A C++23 compiler/toolchain
  - LLVM/Clang, GCC, or MSVC with C++23 support
- Git (for CPM to fetch dependencies via GitHub, or provide dependencies upstream)

## Getting started (build)

Basic out-of-source build:

```bash
# Configure
cmake -S . -B build -DCMAKE_BUILD_TYPE=Debug

# Build the libraries and tests
cmake --build build --target SproutPP_UnitTests
```

Notes
- The project sets CMAKE_CXX_STANDARD to 23 if not already set by a parent project.
- The interface and framework libraries are built from include/ and src/.
- Dependencies are fetched automatically via CPM if not already provided as targets in a parent project.

## Running tests

From the build directory, after building tests:

```bash
# Run all tests via CTest (recommended)
ctest --test-dir build -V

# Or run the unit test binary directly (path may vary by generator/toolchain)
./build/test/unit/SproutPP_UnitTests
```

CTest configuration
- The repository includes CTest configuration and discovery via Catch2. Unit tests in test/unit are automatically discovered.
- CDash-style dashboard targets (Continuous/Experimental/Nightly) are available, but they generally require additional configuration to use.

## Using the libraries in your project

CMake packages/targets:
- sproutpp_interface (alias sproutpp::interface)
- sproutpp_framework (alias sproutpp::framework)

Example:
```cmake
find_package(sproutpp CONFIG REQUIRED)

add_executable(my_app main.cpp)
target_link_libraries(my_app PRIVATE sproutpp::framework)
```

Headers:
- Aggregate include header: include/sproutpp.h
- Specific interfaces: include/sproutpp/*.h

## Environment variables

- There is a property source for environment variables referenced in tests (Framework_EnvironmentPropertySource.cpp).
  - TODO: Document the exact property source key names, behavior, and how to enable/disable it in ApplicationContext/PropertyResolver once the public API is finalized.
- No other project-specific environment variables are required to build or test.

## Scripts and utilities

- No custom scripts are present at the repository root. Build/test is handled by CMake and CTest.
- CTest dashboard convenience targets exist (Continuous/Experimental/Nightly groups) via the CMake template.

## Project structure

- CMakeLists.txt — top-level project and packaging
- Dependencies.cmake — third-party dependencies via CPM
- ProjectOptions.cmake — common warning/options targets
- cmake/ — CMake helper modules (CPM, Boost config, etc.)
- configured_files/ — configured headers/files generated by CMake
- include/ — public headers
  - sproutpp.h — umbrella header
  - sproutpp/*.h — interfaces for application context, bean factory, property resolver/source
- src/ — framework implementation (default application context, bean factory, compositing property resolver, property sources)
- test/ — Catch2 tests (main and unit)

## Development tips

- The code uses C++ modules like std::ranges and relies on modern features; ensure your compiler and standard library are up to date.
- Hidden visibility is enabled by default for better binary hygiene (CMAKE_CXX_VISIBILITY_PRESET hidden).
- The project supports installation and CPack packaging via sproutpp_package_project; adjust as needed to export and install targets.

## License

- Licensed under the MIT License. See "License.md" at the repository root for full text.

## Maintainer TODOs

- Document the property source types and configuration keys:
  - import.config handling in compositing property resolver
  - environment property source behavior
  - any dynamic sources and watcher notifications
- Fill out the project description in top-level CMakeLists.txt (project DESCRIPTION) and README overview accordingly.
